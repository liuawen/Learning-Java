# é¡¹ç›®å¼€å‘æµç¨‹

### 1ã€æ ¹æ®éœ€æ±‚æ–‡æ¡£åˆ†ææ•´ä¸ªé¡¹ç›®ï¼Œè¿›è¡Œç›¸å…³è¡¨çš„è®¾è®¡

â€‹		é€šè¿‡éœ€æ±‚æ–‡æ¡£åˆ†æå„ä¸ªæ¨¡å—éœ€è¦çš„è¡¨ä»¥åŠç›¸åº”çš„è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œæ­¤é˜¶æ®µä¸»è¦æ˜¯æƒ³è®©å¤§å®¶ç†Ÿæ‚‰è¿™ä¸ªè¿‡ç¨‹ï¼Œåç»­å®é™…å¼€å‘çš„æ—¶å€™æˆ‘ä¼šå°†è¡¨ç»“æ„ç›´æ¥ç»™å‡ºï¼Œå¤§å®¶åšå¯¹æ¯”å³å¯ï¼Œè®°ä½ä¸€å¥è¯ï¼Œ**è¡¨è®¾è®¡æ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œåªæœ‰åˆé€‚ä¸ä¸åˆé€‚**

### 2ã€æ­å»ºå‰ç«¯é¡¹ç›®

â€‹		æ­¤é¡¹ç›®çš„å¼€å‘æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é˜¿é‡Œå¼€æºçš„å‰ç«¯æ¡†æ¶Ant Design,æ­¤æ¡†æ¶æ˜¯ä½¿ç”¨vueæ¥å®Œæˆå…·ä½“åŠŸèƒ½çš„ï¼Œå› ä¸ºåœ¨ç°åœ¨çš„å…¬å¸çš„å¼€å‘ä¸­ï¼Œå‡ ä¹éƒ½æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå®Œæˆå‰ç«¯åŠŸèƒ½ï¼Œåç«¯å·¥ç¨‹å¸ˆå®Œæˆåç«¯é€»è¾‘çš„ç¼–å†™ï¼Œæˆ‘ä»¬æ•™å­¦çš„ä¾§é‡ç‚¹åœ¨äºåç«¯ï¼Œå› æ­¤å‰ç«¯ç›´æ¥ä½¿ç”¨ç»™å¤§å®¶æä¾›å¥½çš„æ¨¡æ¿ï¼Œå¤§å®¶åªéœ€è¦ä¸‹è½½å³å¯ã€‚

æ“ä½œæ­¥éª¤ï¼š

â€‹		1ã€ä¸‹è½½é¡¹ç›®å¹¶å®Œæˆè§£å‹çš„åŠŸèƒ½

â€‹		2ã€åœ¨å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹æ‰“å¼€cmdï¼Œç„¶åè¿è¡Œnpm install

â€‹		3ã€åœ¨æ•´ä¸ªå®‰è£…è¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œè‡ªè¡Œä¸Šç½‘è§£å†³ï¼Œè§£å†³ä¸äº†è”ç³»æˆ‘ï¼Œ(åˆ«æ€‚ï¼Œå¹²å°±å®Œäº†)ã€‚

â€‹		4ã€å®‰è£…å®Œæˆä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ npm run serveå‘½ä»¤æ¥è¿›è¡Œ è¿è¡Œ



cmd    npm install 

npm run serve 

### 3ã€æ­å»ºåç«¯é¡¹ç›®

â€‹		åç«¯æˆ‘ä»¬æŠ›å¼ƒä½¿ç”¨ssmçš„è¿™ç§è€çš„é¡¹ç›®æ­å»ºæ¨¡å¼ï¼Œä½¿ç”¨ç°åœ¨åº”ç”¨æœ€å¤šçš„springbootæ¥è¿›è¡Œå®ç°ã€‚

æ“ä½œæ­¥éª¤ï¼š

â€‹		1ã€åˆ›å»ºspringbooté¡¹ç›®

â€‹		2ã€å¯¼å…¥éœ€è¦çš„ä¾èµ–

pom.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.2.6.RELEASE</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>
    <groupId>com.mashibing</groupId>
    <artifactId>family_service_platform</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>family_service_platform</name>
    <description>Demo project for Spring Boot</description>

    <properties>
        <java.version>1.8</java.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>2.1.2</version>
        </dependency>
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-devtools</artifactId>
            <scope>runtime</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
            <exclusions>
                <exclusion>
                    <groupId>org.junit.vintage</groupId>
                    <artifactId>junit-vintage-engine</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <!--mybatisä»£ç å¿«é€Ÿç”Ÿæˆ-->
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-generator</artifactId>
            <version>3.3.1</version>
        </dependency>
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-boot-starter</artifactId>
            <version>3.3.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity-engine-core</artifactId>
            <version>2.2</version>
        </dependency>
        <!-- https://mvnrepository.com/artifact/log4j/log4j -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </resource>
        </resources>
    </build>
</project>
```

â€‹		3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶

application.yaml

```yaml
server:
  port: 8080
spring:
  datasource:
    username: root
    password: 123456
    url: jdbc:mysql://localhost:3306/family_service_platform?useSSL=false&serverTimezone=UTC
    driver-class-name: com.mysql.cj.jdbc.Driver
mybatis:
  mapper-locations: classpath:com/mashibing/mapper/common/*.xml
  configuration:
    map-underscore-to-camel-case: true
logging:
  level:
    com:
      mashibing:
        mapper:
          common: debug
```

log4j.properties

```properties
# å…¨å±€æ—¥å¿—é…ç½®%n
log4j.rootLogger=info, stdout
# MyBatis æ—¥å¿—é…ç½®
log4j.logger.com.mashibing.mapper=TRACE
# æ§åˆ¶å°è¾“å‡º
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m

log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Connection = DEBUG  
log4j.logger.java.sql.Statement = DEBUG  
log4j.logger.java.sql.PreparedStatement = DEBUG  
log4j.logger.java.sql.ResultSet = DEBUG
```

â€‹		4ã€é€šè¿‡mybatis-plusåå‘ç”Ÿæˆå¯¹åº”çš„å®ä½“ç±»

```java
package com.mashibing;

import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.GlobalConfig;
import com.baomidou.mybatisplus.generator.config.PackageConfig;
import com.baomidou.mybatisplus.generator.config.StrategyConfig;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
import org.junit.jupiter.api.Test;

public class MyTest {


    @Test
    public void testGenerator() {
        AutoGenerator autoGenerator = new AutoGenerator();

        //å…¨å±€é…ç½®
        GlobalConfig globalConfig = new GlobalConfig();
        globalConfig.setAuthor("lian")
                .setOutputDir("E:\\self_project\\family_service_platform\\src\\main\\java")//è®¾ç½®è¾“å‡ºè·¯å¾„
                .setFileOverride(true)//è®¾ç½®æ–‡ä»¶è¦†ç›–
                .setIdType(IdType.AUTO)//è®¾ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥
                .setServiceName("%sService")//serviceæ¥å£çš„åç§°
                .setBaseResultMap(true)//åŸºæœ¬ç»“æœé›†åˆ
                .setBaseColumnList(true)//è®¾ç½®åŸºæœ¬çš„åˆ—
                .setControllerName("%sController");

        //é…ç½®æ•°æ®æº
        DataSourceConfig dataSourceConfig = new DataSourceConfig();
        dataSourceConfig.setDriverName("com.mysql.cj.jdbc.Driver").setUrl("jdbc:mysql://localhost:3306/family_service_platform?serverTimezone=UTC")
                .setUsername("root").setPassword("123456");

        //ç­–ç•¥é…ç½®
        StrategyConfig strategyConfig = new StrategyConfig();
        strategyConfig.setCapitalMode(true)//è®¾ç½®å…¨å±€å¤§å†™å‘½å
                .setNaming(NamingStrategy.underline_to_camel)//æ•°æ®åº“è¡¨æ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥
                //.setTablePrefix("tbl_")//è®¾ç½®è¡¨åå‰ç¼€
                .setInclude();

        //åŒ…åé…ç½®
        PackageConfig packageConfig = new PackageConfig();
        packageConfig.setParent("com.mashibing").setMapper("mapper")
                .setService("service").setController("controller")
                .setEntity("bean").setXml("mapper");

        autoGenerator.setGlobalConfig(globalConfig).setDataSource(dataSourceConfig)
                .setStrategy(strategyConfig).setPackageInfo(packageConfig);

        autoGenerator.execute();
    }
}
```

â€‹		5ã€è¿è¡Œspringbooté¡¹ç›®ï¼Œä¿è¯é¡¹ç›®èƒ½å¤Ÿè¿è¡Œèµ·æ¥ã€‚	

â€‹		6ã€è¿è¡Œä¹‹åå‘ç°é¡¹ç›®æŠ¥é”™ï¼ŒæŠ¥é”™åŸå› æ˜¯å› ä¸ºmapperå¯¹è±¡æ— æ³•è‡ªåŠ¨è£…é…ï¼Œå› æ­¤éœ€è¦åœ¨å¯åŠ¨çš„applicationç±»ä¸Šæ·»åŠ @MapperScanæ³¨è§£æˆ–è€…åœ¨æ¯ä¸€ä¸ªmapperçš„æ¥å£ä¸Šæ·»åŠ @Mapperæ³¨è§£ï¼Œæ­¤å¤„ä¸åšä»»ä½•é™åˆ¶ï¼Œå¤§å®¶å¼€å¿ƒå°±å¥½ã€‚å½“ç„¶ä¸å¯å¦è®¤çš„æ˜¯æˆ‘ä»¬å½“å‰é¡¹ç›®çš„è¡¨æ¯”è¾ƒå¤šï¼Œå› æ­¤åœ¨æ¯ä¸€ä¸ªMapperä¸Šæ·»åŠ @Mapperæ³¨è§£æ¯”è¾ƒéº»çƒ¦

***

â€‹		æ€»ç»“ï¼Œæˆªæ­¢åˆ°æ­¤å¤„ä¸ºæ­¢ï¼Œæˆ‘ä»¬éœ€è¦ç¯å¢ƒå‡†å¤‡å·¥ä½œå·²ç»å®Œæˆï¼Œä¸‹é¢å¼€å§‹è¿›è¡Œä¸‹ä¸€æ­¥çš„å¼€å‘ã€‚

â€‹		å› ä¸ºç°åœ¨å¤§å®¶åœ¨è®¿é—®çš„æ—¶å€™ç”¨åˆ°çš„æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œæ‰€ä»¥å¿…é¡»è¦ä¿è¯ä¸¤ä¸ªé¡¹ç›®ä¹‹é—´èƒ½å¤Ÿè¿›è¡Œé€šä¿¡ï¼Œæ­¤æ—¶å¯¹äºå‰ç«¯å’Œåç«¯è€Œè¨€ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è¿›è¡Œç›¸å…³çš„é…ç½®ï¼Œæ¥ä¿è¯ä¸¤ä¸ªé¡¹ç›®å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æ•°æ®é€šä¿¡



Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class

æˆ‘æ˜¯ä»€ä¹ˆéƒ½é…ç½®å¥½äº†ï¼Œä¸€ç›´æŠ¥è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘å»åˆ·æ–°äº†ä¸‹Mavenä¾èµ–å°±å¥½äº†ğŸ˜‚

å¤šè°¢æé†’ï¼Œåˆ·æ–°mavenåå°±è¡Œäº†

æœ‰å¯èƒ½ä½ çš„ç¼–è¯‘æ–‡ä»¶éœ€è¦æ¸…ç†ä¸€ä¸‹å°±å¯ä»¥

mvn cleanä¸€ä¸‹çœ‹çœ‹

 @SpringBootApplication(exclude= {DataSourceAutoConfiguration.class})



æ˜¯ç”¨ideaå¼„çš„å—ï¼Œå¦‚æœæ˜¯çœ‹çœ‹pomæ–‡ä»¶é‡Œé¢ æœ‰æ²¡æœ‰æ‰“åŒ…æˆpomï¼Œæœ‰çš„è¯å»æ‰ã€‚ æœ‰ä¸€ä¸ªå¤§ä½¬ç»™çš„æ–¹æ³•ï¼Œå¯¹æˆ‘æœ‰æ•ˆã€‚

æ‰“åŒ…æˆpomï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯å­˜åœ¨è¿™ä¸€è¡Œä»£ç 1

2020-07-26 10:24:16.409 ERROR 22004 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).



è¿˜æœ‰ä¸€ç§é”™è¯¯ï¼Œå°±æ˜¯pom.xmlé‡Œå¯¼å…¥äº†å…¶å®ƒå·¥ç¨‹çš„ä¾èµ–ï¼Œç„¶åè¿™ä¸ªå…¶å®ƒå·¥ç¨‹çš„pom.xmlé‡Œæœ‰éœ€è¦é…ç½®dataSourceæ•°æ®æºçš„ä¾èµ–ï¼Œè§£å†³åŠæ³•å°±æ˜¯åœ¨å½“å‰å·¥ç¨‹å¯¼å…¥å…¶ä»–å·¥ç¨‹ä¾èµ–æ—¶ï¼ŒæŠŠå…¶å®ƒå·¥ç¨‹é‡Œéœ€è¦é…ç½®dataSourceçš„ä¾èµ–ç»™excludeæ‰



```
è¿˜æœ‰ä¸€ç§é”™è¯¯ï¼Œå°±æ˜¯pom.xmlé‡Œå¯¼å…¥äº†å…¶å®ƒå·¥ç¨‹çš„ä¾èµ–ï¼Œç„¶åè¿™ä¸ªå…¶å®ƒå·¥ç¨‹çš„pom.xmlé‡Œæœ‰éœ€è¦é…ç½®dataSourceæ•°æ®æºçš„ä¾èµ–ï¼Œè§£å†³åŠæ³•å°±æ˜¯åœ¨å½“å‰å·¥ç¨‹å¯¼å…¥å…¶ä»–å·¥ç¨‹ä¾èµ–æ—¶ï¼ŒæŠŠå…¶å®ƒå·¥ç¨‹é‡Œéœ€è¦é…ç½®dataSourceçš„ä¾èµ–ç»™excludeæ‰
[code=objc]
        <dependency>
            <groupId>com.xuecheng</groupId>
            <artifactId>xc-framework-model</artifactId>
            <version>0.0.1-SNAPSHOT</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework.boot</groupId>
                    <artifactId>spring-boot-starter-data-jpa</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
```



Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-07-26 10:29:59.404 ERROR 23476 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).

Process finished with exit code 1



If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).





org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.mashibing.FamilyServicePlatformApplication]; nested exception is java.io.FileNotFoundException: class path resource [application.yml] cannot be opened because it does not exist
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:188) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE]
	at org.springf



yaml???    yml 



yml  properties ä¸èƒ½ 





rg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'loginController': Unsatisfied dependency expressed through field 'loginService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'loginService': Unsatisfied dependency expressed through field 'tblUserRecordMapper'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tblUserRecordMapper' defined in file [F:\IdeaProjects\family_service_platform\target\classes\com\mashibing\mapper\TblUserRecordMapper.class]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property 'sqlSessionFactory' or 'sqlSessionTemplate' are required
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643) ~[spring-beans-5.2.5.RELEASE.jar:5.2.5.RELEASE]
	a



Error creating bean with name 'loginController': Unsatisfied dependency expressed through field 'loginService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'loginService': Unsatisfied dependency expressed through field 'tblUserRecordMapper'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tblUserRecordMapper' defined in file [F:\IdeaProjects\family_service_platform\target\classes\com\mashibing\mapper\TblUserRecordMapper.class]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property 'sqlSessionFactory' or 'sqlSessionTemplate' are required

```
1.controller åŠ æ³¨è§£
@RestController
@RequestMapping("/user")

2.serviceåŠ æ³¨è§£

@Service
@Autowired
3.dao åŠ æ³¨è§£å’Œå®ç°æ¥å£
@Param("")
```





```
@SpringBootApplication(exclude= {DataSourceAutoConfiguration.class})
```



 java.lang.IllegalArgumentException: Property 'sqlSessionFactory' or 'sqlSessionTemplate' are required





mybatis:
  mapper-locations: classpath:zzsxt/mapper/*.xml

1. 
   @MapperScan("zzsxt.mapper")
2. 

â€‹	

```properties
# å…¨å±€æ—¥å¿—é…ç½®%n
log4j.rootLogger=info, stdout
# MyBatis æ—¥å¿—é…ç½®
log4j.logger.com.mashibing.mapper=TRACE
# æ§åˆ¶å°è¾“å‡º
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m

log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Connection = DEBUG  
log4j.logger.java.sql.Statement = DEBUG  
log4j.logger.java.sql.PreparedStatement = DEBUG  
log4j.logger.java.sql.ResultSet = DEBUG
```

properties



yml

```yaml
#é¡¹ç›®å¯åŠ¨ç«¯å£
server:
  port: 8080
#æ•°æ®æºé…ç½®
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/family_service_platform?serverTimezone=UTC&useSSL=false
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
#é…ç½®mybatis
#mybatis:
#  mapper-locations: classpath:com/mashibing/mapper/*.xml
#  configuration:
#    map-underscore-to-camel-case: true
#sqlè¯­å¥æ—¥å¿—æ‰“å°
logging:
  level:
    com:
      mashibing:
        mapper: debug

```



yaml



# SpringBoot Application

```java
package com.mashibing;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;
import org.springframework.context.annotation.PropertySource;

//@SpringBootApplication(exclude= {DataSourceAutoConfiguration.class})
@SpringBootApplication
//@MapperScan("com.mashibing.mapper")
@MapperScan
//@PropertySource(value = {"classpath:application.yml"})
public class FamilyServicePlatformApplication {

	public static void main(String[] args) {
		SpringApplication.run(FamilyServicePlatformApplication.class, args);
	}

}

```





### 4ã€ä¿®æ”¹å‰ç«¯é¡¹ç›®é…ç½®ï¼Œå®Œæˆé€šä¿¡åŠŸèƒ½

â€‹		1ã€ä¿®æ”¹.env.developmentæ–‡ä»¶

```tex
NODE_ENV=development
VUE_APP_PREVIEW=false
VUE_APP_API_BASE_URL=http://localhost:8080/
```

â€‹		2ã€åˆ é™¤main.jsçš„mockæ•°æ®æŒ‚è½½ï¼Œåœ¨srcç›®å½•ä¸‹æ‰“å¼€main.jsæ–‡ä»¶ï¼Œå°†import './mock'ä»£ç æ³¨é‡Š

â€‹		3ã€å½“ä¿®æ”¹æˆåŠŸä¹‹åï¼Œé‡æ–°è¿è¡ŒæœåŠ¡ï¼Œç‚¹å‡»ç™»å½•è¯·æ±‚ï¼ŒæŸ¥çœ‹å‘é€çš„åœ°å€æ˜¯ä»€ä¹ˆåœ°å€ï¼Œå¦‚æœå‡ºç°http://localhost:8080/auth/loginï¼Œåˆ™è¡¨ç¤ºå‰ç«¯é¡¹ç›®çš„ä¿®æ”¹å·²ç»æˆåŠŸï¼Œåªéœ€è¦å»ä¿®æ”¹åç«¯é¡¹ç›®çš„é…ç½®å³å¯ã€‚ä¸è¦é—®æˆ‘ä¸æˆåŠŸæ€ä¹ˆåŠï¼Œä½ æŒ‰ç…§æˆ‘çš„æ–¹å¼ï¼Œä¸å¯èƒ½ä¸æˆåŠŸï¼

### 5ã€ä¿®æ”¹åç«¯é¡¹ç›®çš„é…ç½®ï¼Œå®Œæˆé€šä¿¡åŠŸèƒ½

â€‹		1ã€åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªconfigçš„åŒ…ï¼Œæ·»åŠ è·¨åŸŸçš„é…ç½®ç±»

```java
package com.mashibing.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;

@Configuration
public class CorsConfig {
    private CorsConfiguration buildConfig() {
        CorsConfiguration corsConfiguration = new CorsConfiguration();
        //  ä½ éœ€è¦è·¨åŸŸçš„åœ°å€  æ³¨æ„è¿™é‡Œçš„ 127.0.0.1 != localhost
        // * è¡¨ç¤ºå¯¹æ‰€æœ‰çš„åœ°å€éƒ½å¯ä»¥è®¿é—®
        corsConfiguration.addAllowedOrigin("*");
        //  è·¨åŸŸçš„è¯·æ±‚å¤´
        corsConfiguration.addAllowedHeader("*"); // 2
        //  è·¨åŸŸçš„è¯·æ±‚æ–¹æ³•
        corsConfiguration.addAllowedMethod("*"); // 3
        //åŠ ä¸Šäº†è¿™ä¸€å¥ï¼Œå¤§è‡´æ„æ€æ˜¯å¯ä»¥æºå¸¦ cookie
        //æœ€ç»ˆçš„ç»“æœæ˜¯å¯ä»¥ åœ¨è·¨åŸŸè¯·æ±‚çš„æ—¶å€™è·å–åŒä¸€ä¸ª session
        corsConfiguration.setAllowCredentials(true);
        return corsConfiguration;
    }
    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        //é…ç½® å¯ä»¥è®¿é—®çš„åœ°å€
        source.registerCorsConfiguration("/**", buildConfig()); // 4
        return new CorsFilter(source);
    }
}
```

â€‹		æˆ–è€…å¯ä»¥åœ¨controllerç±»çš„ä¸Šé¢æ·»åŠ æ³¨è§£

```java
@CrossOrigin(origins = "*",allowCredentials="true",allowedHeaders = "*",methods = {})
```

â€‹		2ã€æ·»åŠ å¯¹åº”çš„controllerè¿›è¡Œå¤„ç†

LoginController.java

```java
package com.bjmsb.controller;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@CrossOrigin(origins = "*",allowCredentials="true",allowedHeaders = "*",methods = {})
public class LoginController {

    @RequestMapping("/auth/2step-code")
    public boolean step_code2(){
        System.out.println("æ­¤è¯·æ±‚æ˜¯å‰ç«¯æ¡†æ¶å¸¦çš„é»˜è®¤è¯·æ±‚ï¼Œå¯ä»¥ä¸åšä»»ä½•å¤„ç†ï¼Œä¹Ÿå¯ä»¥åœ¨å‰ç«¯å°†å…¶åˆ é™¤");
        System.out.println("step_code2");
        return true;
    }

    @RequestMapping("/auth/login")
    public String login(){
        System.out.println("login");
        return "success";
    }
}
```

å¦‚æœèƒ½è¯·æ±‚æˆåŠŸï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æ•´ä¸ªé¡¹ç›®å·²ç»å¯ä»¥é¡ºåˆ©è¿›è¡Œé€šä¿¡ï¼Œåç»­çš„è¯åªéœ€è¦å®Œæˆå¯¹åº”ä¸šåŠ¡çš„ç¼–å†™å³å¯ï¼Œ

***

â€‹		ä»ä¸‹é¢å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¦å¼€å§‹è¿›è¡Œæ•´ä¸ªé¡¹ç›®çš„ä¸šåŠ¡å¼€å‘äº†ï¼Œæ‰€ä»¥å¸Œæœ›å¤§å®¶èƒ½æèµ·ç²¾ç¥ï¼Œå¹²ä»–ï¼ï¼ï¼